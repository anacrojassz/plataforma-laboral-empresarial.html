<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plataforma Laboral Profesional</title>

<style>
:root{
  --azul:#0A2A43;
  --azul2:#0F4C81;
  --dorado:#C6A84A;
  --gris:#f4f6f9;
}

body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:var(--gris);
  color:var(--azul);
}

header{
  background:var(--azul);
  color:white;
  padding:20px;
  text-align:center;
}

nav{
  display:flex;
  justify-content:center;
  background:var(--azul2);
}

nav button{
  flex:1;
  padding:12px;
  border:none;
  background:var(--azul2);
  color:white;
  cursor:pointer;
  font-weight:600;
}

nav button.active{
  background:var(--dorado);
  color:black;
}

.container{
  max-width:1200px;
  margin:30px auto;
  background:white;
  padding:30px;
  border-radius:10px;
  box-shadow:0 5px 20px rgba(0,0,0,0.1);
}

h2{
  border-left:6px solid var(--dorado);
  padding-left:10px;
  margin-top:30px;
}

input, select{
  width:100%;
  padding:8px;
  margin-top:5px;
  margin-bottom:10px;
  border-radius:5px;
  border:1px solid #ccc;
}

button.calc{
  background:var(--azul2);
  color:white;
  border:none;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
  cursor:pointer;
}

button.calc:hover{
  background:var(--dorado);
  color:black;
}

.table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}

.table th, .table td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}

.result, .year-block, .normativa-content{
  margin-top:20px;
  padding:15px;
  background:#eef2f7;
  border-radius:8px;
}

.accordion{
  background:var(--azul2);
  color:white;
  cursor:pointer;
  padding:12px;
  width:100%;
  border:none;
  text-align:left;
  outline:none;
  font-size:15px;
  transition:0.4s;
  margin-top:10px;
  border-radius:5px;
}

.activeAcc, .accordion:hover{
  background:var(--dorado);
  color:black;
}

.panel{
  padding:0 10px;
  display:none;
  background-color:#f4f7fb;
  overflow:hidden;
  margin-bottom:10px;
  border-radius:5px;
}
</style>
</head>

<body>

<header>
<h1>PLATAFORMA LABORAL PROFESIONAL</h1>
<p>Consulta y liquidación de nómina y contratos - Colombia</p>
</header>

<nav>
  <button class="tab-btn active" onclick="abrirTab('empleado')">Empleado</button>
  <button class="tab-btn" onclick="abrirTab('empresario')">Empresario</button>
  <button class="tab-btn" onclick="abrirTab('normativa')">Normativa</button>
  <button class="tab-btn" onclick="abrirTab('historial')">Historial</button>
</nav>

<div class="container">

<!-- MÓDULO EMPLEADO -->
<div id="empleado" class="tab" style="display:block;">
<h2>Cálculo Nómina y Liquidación</h2>

<label>Nombre</label>
<input id="nombreEmp" placeholder="Nombre completo">

<label>Cédula</label>
<input id="ccEmp" placeholder="Cédula">

<label>Tipo de cálculo</label>
<select id="tipoCalc">
<option value="diario">Diario</option>
<option value="semanal">Semanal</option>
<option value="quincenal">Quincenal</option>
<option value="mensual">Mensual</option>
</select>

<label>Salario base</label>
<input type="number" id="salarioEmp">

<label>Auxilio transporte</label>
<input type="number" id="auxEmp" value="0">

<label>Horas Extras Diurnas</label>
<input type="number" id="extraDiurna" value="0">

<label>Horas Extras Nocturnas</label>
<input type="number" id="extraNocturna" value="0">

<label>Horas Dominicales y Festivas</label>
<input type="number" id="extraDominical" value="0">

<label>Fecha Inicio Contrato</label>
<input type="date" id="inicioEmp">

<label>Fecha Fin Contrato</label>
<input type="date" id="finEmp">

<button class="calc" onclick="calcularEmpleado()">Calcular</button>

<div id="resultadoEmp" class="result"></div>
</div>

<!-- MÓDULO EMPRESARIO -->
<div id="empresario" class="tab" style="display:none;">
<h2>Gestión Costos Nómina</h2>

<label>Nombre Empresa</label>
<input id="empresa">

<label>NIT</label>
<input id="nit">

<h3>Agregar Empleado</h3>
<input id="nombreE" placeholder="Nombre">
<input id="ccE" placeholder="Cédula">
<input type="number" id="salarioE" placeholder="Salario">
<select id="riesgo">
<option value="0.00522">ARL Nivel 1 (0.522%)</option>
<option value="0.01044">ARL Nivel 2 (1.044%)</option>
<option value="0.02436">ARL Nivel 3 (2.436%)</option>
<option value="0.04350">ARL Nivel 4 (4.350%)</option>
<option value="0.06960">ARL Nivel 5 (6.960%)</option>
</select>
<input type="number" id="dotacion" placeholder="Dotación mensual" value="0">

<button class="calc" onclick="agregarEmpleado()">Agregar Empleado</button>

<table class="table" id="tablaEmp">
<tr>
<th>Nombre</th><th>CC</th><th>Costo Mensual</th><th>Liquidación Acumulada</th>
</tr>
</table>

<div id="totalesEmp" class="result"></div>

<button class="calc" onclick="guardarEmp()">Guardar Consulta</button>
<button class="calc" onclick="window.print()">Imprimir / PDF</button>

</div>

<!-- NORMATIVA -->
<div id="normativa" class="tab" style="display:none;">
<h2>Normativa Laboral Vigente - Colombia</h2>

<button class="accordion">Cesantías y Intereses</button>
<div class="panel normativa-content">
<p>Cesantías: Art. 249 CST<br>
Intereses de cesantías: 12% anual, Ley 52 de 1975</p>
</div>

<button class="accordion">Prima de Servicios</button>
<div class="panel normativa-content">
<p>Prima: Art. 306 CST, proporcional al tiempo laborado</p>
</div>

<button class="accordion">Vacaciones</button>
<div class="panel normativa-content">
<p>Vacaciones: Art. 186 CST, 15 días hábiles por año</p>
</div>

<button class="accordion">Horas Extras y Recargos</button>
<div class="panel normativa-content">
<p>Extra Diurna 25%, Extra Nocturna 75%, Dominical/Festivo 100%</p>
</div>

<button class="accordion">Indemnización</button>
<div class="panel normativa-content">
<p>Indemnización según Art. 64 CST y tipo de contrato</p>
</div>

</div>

<!-- HISTORIAL -->
<div id="historial" class="tab" style="display:none;">
<h2>Historial Guardado</h2>
<div id="historialContent" class="result"></div>
</div>

</div>

<script>
// Navegación por pestañas
function abrirTab(tab){
  document.querySelectorAll('.tab').forEach(t=>t.style.display='none');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById(tab).style.display='block';
  event.currentTarget.classList.add('active');
}

// Acordeón normativa
document.querySelectorAll('.accordion').forEach((acc)=>{
  acc.addEventListener('click', ()=>{
    acc.classList.toggle('activeAcc');
    let panel = acc.nextElementSibling;
    if(panel.style.display==='block'){ panel.style.display='none'; }
    else{ panel.style.display='block'; }
  });
});

// Funciones Empleado
function calcularEmpleado(){
  let nombre=document.getElementById("nombreEmp").value;
  let salario=parseFloat(document.getElementById("salarioEmp").value);
  let aux=parseFloat(document.getElementById("auxEmp").value);
  let extraDiurna=parseFloat(document.getElementById("extraDiurna").value);
  let extraNocturna=parseFloat(document.getElementById("extraNocturna").value);
  let extraDom=parseFloat(document.getElementById("extraDominical").value);
  let inicio=document.getElementById("inicioEmp").value;
  let fin=document.getElementById("finEmp").value;

  let dias=Math.floor((new Date(fin)-new Date(inicio))/(1000*60*60*24))+1;
  
  let salarioDia=salario/30;
  let devengado=salario+(aux);
  let horasExtras=(extraDiurna*salarioDia*1.25)+(extraNocturna*salarioDia*1.75)+(extraDom*salarioDia*2);

  let salud=devengado*0.04;
  let pension=devengado*0.04;

  let ces=salario*dias/360;
  let intCes=ces*0.12;
  let prima=salario*dias/360;
  let vac=salario*dias/720;

  let total=devengado+horasExtras+ces+intCes+prima+vac-salud-pension;

  document.getElementById("resultadoEmp").innerHTML=`
  <h3>Resultado Empleado: ${nombre}</h3>
  <table class="table">
  <tr><th>Concepto</th><th>Valor</th></tr>
  <tr><td>Salario Base</td><td>$${salario.toFixed(0)}</td></tr>
  <tr><td>Auxilio Transporte</td><td>$${aux.toFixed(0)}</td></tr>
  <tr><td>Horas Extras</td><td>$${horasExtras.toFixed(0)}</td></tr>
  <tr><td>Cesantías</td><td>$${ces.toFixed(0)}</td></tr>
  <tr><td>Intereses Cesantías</td><td>$${intCes.toFixed(0)}</td></tr>
  <tr><td>Prima</td><td>$${prima.toFixed(0)}</td></tr>
  <tr><td>Vacaciones</td><td>$${vac.toFixed(0)}</td></tr>
  <tr><td>Salud 4%</td><td>$${salud.toFixed(0)}</td></tr>
  <tr><td>Pensión 4%</td><td>$${pension.toFixed(0)}</td></tr>
  <tr><th>Total Neto</th><th>$${total.toFixed(0)}</th></tr>
  </table>
  `;
}

// Funciones Empresario
let empleados=[];
function agregarEmpleado(){
  let nombre=document.getElementById("nombreE").value;
  let cc=document.getElementById("ccE").value;
  let salario=parseFloat(document.getElementById("salarioE").value);
  let riesgo=parseFloat(document.getElementById("riesgo").value);
  let dotacion=parseFloat(document.getElementById("dotacion").value);

  let salud=salario*0.085;
  let pension=salario*0.12;
  let arl=salario*riesgo;
  let caja=salario*0.04;
  let icbf=salario*0.03;
  let sena=salario*0.02;

  let costoTotal=salario+salud+pension+arl+caja+icbf+sena+dotacion;

  empleados.push({nombre,cc,costoTotal});

  renderTabla();
}

function renderTabla(){
  let tabla=document.getElementById("tablaEmp");
  tabla.innerHTML=`<tr><th>Nombre</th><th>CC</th><th>Costo Mensual</th></tr>`;
  let total=0;
  empleados.forEach(e=>{
    total+=e.costoTotal;
    tabla.innerHTML+=`<tr><td>${e.nombre}</td><td>${e.cc}</td><td>$${e.costoTotal.toFixed(0)}</td></tr>`;
  });
  document.getElementById("totalesEmp").innerHTML=`<h3>Total Nómina Empresa: $${total.toFixed(0)}</h3><p>Total empleados: ${empleados.length}</p>`;
}

function guardarEmp(){
  localStorage.setItem("empleados",JSON.stringify(empleados));
  alert("Consulta guardada correctamente");
  renderHistorial();
}

function renderHistorial(){
  let h=document.getElementById("historialContent");
  let data=JSON.parse(localStorage.getItem("empleados"))||[];
  if(data.length===0){h.innerHTML="No hay historial guardado"; return;}
  h.innerHTML=`<table class="table"><tr><th>Nombre</th><th>CC</th><th>Costo Mensual</th></tr>`;
  data.forEach(e=>{
    h.innerHTML+=`<tr><td>${e.nombre}</td><td>${e.cc}</td><td>$${e.costoTotal.toFixed(0)}</td></tr>`;
  });
  h.innerHTML+="</table>";
}

renderHistorial();

</script>

</body>
</html>
