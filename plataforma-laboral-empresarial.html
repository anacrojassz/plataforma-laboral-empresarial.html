<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plataforma Laboral Profesional</title>

<style>
:root{
  --azul:#0A2A43;
  --azul2:#0F4C81;
  --dorado:#C6A84A;
  --gris:#f4f6f9;
}

body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:var(--gris);
  color:var(--azul);
}

header{
  background:var(--azul);
  color:white;
  padding:20px;
  text-align:center;
}

.container{
  max-width:1100px;
  margin:30px auto;
  background:white;
  padding:30px;
  border-radius:10px;
  box-shadow:0 5px 20px rgba(0,0,0,0.1);
}

h2{
  border-left:6px solid var(--dorado);
  padding-left:10px;
}

input, select{
  width:100%;
  padding:8px;
  margin-top:5px;
  margin-bottom:10px;
  border-radius:5px;
  border:1px solid #ccc;
}

button{
  background:var(--azul2);
  color:white;
  border:none;
  padding:10px;
  border-radius:6px;
  cursor:pointer;
  margin-top:10px;
}

button:hover{
  background:var(--dorado);
  color:black;
}

.table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}

.table th, .table td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}

.result{
  margin-top:20px;
  padding:15px;
  background:#eef2f7;
  border-radius:8px;
}

.total-final{
  font-size:20px;
  font-weight:bold;
  color:var(--dorado);
}
</style>
</head>

<body>

<header>
<h1>PLATAFORMA LABORAL PROFESIONAL</h1>
<p>Nómina y Liquidación - Colombia</p>
</header>

<div class="container">

<h2>Módulo Empleado</h2>

<label>Tipo de Consulta</label>
<select id="modoConsulta" onchange="cambiarModo()">
  <option value="nomina">Nómina</option>
  <option value="liquidacion">Liquidación</option>
</select>

<!-- ====================== NOMINA ====================== -->
<div id="formNomina">

<label>Tipo de vínculo</label>
<select id="tipoVinculo">
  <option value="laboral">Contrato Laboral</option>
  <option value="servicios">Prestación de Servicios</option>
</select>

<label>Periodo</label>
<select id="periodoNomina">
  <option value="diario">Diario</option>
  <option value="semanal">Semanal</option>
  <option value="quincenal">Quincenal</option>
  <option value="mensual">Mensual</option>
</select>

<label>Salario mensual base</label>
<input type="number" id="salarioNomina">

<label>Días trabajados</label>
<input type="number" id="diasTrabajados" value="30">

<label>Horas Extras Diurnas (25%)</label>
<input type="number" id="extraDiurna" value="0">

<label>Horas Extras Nocturnas (75%)</label>
<input type="number" id="extraNocturna" value="0">

<label>Horas Dominicales / Festivas (100%)</label>
<input type="number" id="extraDominical" value="0">

<button onclick="calcularNomina()">Calcular Nómina</button>

<div id="resultadoNomina" class="result"></div>

</div>

<!-- ====================== LIQUIDACION ====================== -->
<div id="formLiquidacion" style="display:none;">

<label>Salario mensual</label>
<input type="number" id="salarioLiq">

<label>Auxilio transporte mensual</label>
<input type="number" id="auxLiq" value="0">

<label>Fecha Inicio</label>
<input type="date" id="inicioLiq">

<label>Fecha Fin</label>
<input type="date" id="finLiq">

<button onclick="agregarLiquidacion()">Agregar Año / Periodo</button>

<div id="resultadoLiquidacion"></div>

</div>

</div>

<script>

// ================= UTILIDADES =================

function formatoCOP(valor){
  return valor.toLocaleString("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0});
}

function diasEntre(f1,f2){
  return Math.floor((new Date(f2)-new Date(f1))/(1000*60*60*24))+1;
}

// ================= CAMBIO MODO =================

function cambiarModo(){
  let modo=document.getElementById("modoConsulta").value;
  document.getElementById("formNomina").style.display = modo==="nomina"?"block":"none";
  document.getElementById("formLiquidacion").style.display = modo==="liquidacion"?"block":"none";
}

// ================= NOMINA =================

function calcularNomina(){

  let salario=parseFloat(document.getElementById("salarioNomina").value)||0;
  let dias=parseFloat(document.getElementById("diasTrabajados").value)||30;
  let tipoVinculo=document.getElementById("tipoVinculo").value;

  let extraD=parseFloat(document.getElementById("extraDiurna").value)||0;
  let extraN=parseFloat(document.getElementById("extraNocturna").value)||0;
  let extraDom=parseFloat(document.getElementById("extraDominical").value)||0;

  if(!salario){alert("Ingrese salario"); return;}

  let valorHora=salario/240;
  let salarioPeriodo=(salario/30)*dias;

  let horasExtras=
      (extraD*valorHora*1.25)+
      (extraN*valorHora*1.75)+
      (extraDom*valorHora*2);

  let salud=0;
  let pension=0;

  if(tipoVinculo==="laboral"){
    salud=salarioPeriodo*0.04;
    pension=salarioPeriodo*0.04;
  }

  let total=salarioPeriodo+horasExtras-salud-pension;

  document.getElementById("resultadoNomina").innerHTML=`
  <table class="table">
  <tr><td>Salario periodo</td><td>${formatoCOP(salarioPeriodo)}</td></tr>
  <tr><td>Horas extras</td><td>${formatoCOP(horasExtras)}</td></tr>
  <tr><td>Salud</td><td>${formatoCOP(salud)}</td></tr>
  <tr><td>Pensión</td><td>${formatoCOP(pension)}</td></tr>
  <tr><th>Total a pagar</th><th>${formatoCOP(total)}</th></tr>
  </table>
  `;
}

// ================= LIQUIDACION =================

let liquidaciones=[];

function agregarLiquidacion(){

  let salario=parseFloat(document.getElementById("salarioLiq").value)||0;
  let aux=parseFloat(document.getElementById("auxLiq").value)||0;
  let inicio=document.getElementById("inicioLiq").value;
  let fin=document.getElementById("finLiq").value;

  if(!salario||!inicio||!fin){alert("Complete datos"); return;}

  let dias=diasEntre(inicio,fin);

  let ces=salario*dias/360;
  let intCes=ces*0.12*(dias/360);
  let prima=salario*dias/360;
  let vac=salario*dias/720;

  let total=ces+intCes+prima+vac;

  liquidaciones.push({dias,ces,intCes,prima,vac,total});

  renderLiquidaciones();
}

function renderLiquidaciones(){

  let cont=document.getElementById("resultadoLiquidacion");
  cont.innerHTML="";
  let totalGeneral=0;

  liquidaciones.forEach((l,i)=>{
    totalGeneral+=l.total;

    cont.innerHTML+=`
    <div class="result">
    <h3>Periodo ${i+1}</h3>
    <table class="table">
    <tr><td>Días</td><td>${l.dias}</td></tr>
    <tr><td>Cesantías</td><td>${formatoCOP(l.ces)}</td></tr>
    <tr><td>Intereses</td><td>${formatoCOP(l.intCes)}</td></tr>
    <tr><td>Prima</td><td>${formatoCOP(l.prima)}</td></tr>
    <tr><td>Vacaciones</td><td>${formatoCOP(l.vac)}</td></tr>
    <tr><th>Total periodo</th><th>${formatoCOP(l.total)}</th></tr>
    </table>
    <button onclick="eliminarLiquidacion(${i})">Eliminar</button>
    </div>
    `;
  });

  cont.innerHTML+=`
  <div class="result total-final">
  TOTAL GENERAL LIQUIDACIÓN: ${formatoCOP(totalGeneral)}
  </div>
  `;
}

function eliminarLiquidacion(i){
  liquidaciones.splice(i,1);
  renderLiquidaciones();
}

</script>

</body>
</html>
